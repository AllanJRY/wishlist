{"schemas":"DEFINE TABLE script_migration SCHEMAFULL\n    PERMISSIONS\n        FOR select FULL\n        FOR create, update, delete NONE;\n\nDEFINE FIELD script_name ON script_migration TYPE string;\nDEFINE FIELD executed_at ON script_migration TYPE datetime DEFAULT time::now();\nDEFINE TABLE user SCHEMAFULL\n    PERMISSIONS\n        FOR select FULL\n        FOR update WHERE id = $auth.id\n        FOR create, delete NONE;\n\nDEFINE FIELD username ON user TYPE string;\nDEFINE FIELD email ON user TYPE string ASSERT string::is::email($value);\nDEFINE FIELD pwd ON user TYPE string;\nDEFINE FIELD registered_at ON user TYPE datetime DEFAULT time::now();\n\nDEFINE INDEX unique_email ON user COLUMNS email UNIQUE;\n\nDEFINE SCOPE user_scope SESSION 30d\n    SIGNUP (\n        CREATE user\n        SET\n            username = $username,\n            email = $email,\n            pwd = crypto::argon2::generate($pwd)\n    )\n    SIGNIN (\n        SELECT *\n        FROM user\n        WHERE username = $username AND crypto::argon2::compare(pwd, $pwd)\n    );\n","events":""}